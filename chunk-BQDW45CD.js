import{e as r,l as c}from"./chunk-2ADSIZJS.js";var a=class i{itemsSubject=new r([]);items$=this.itemsSubject.asObservable();items=[];addToCart(t){let e=this.items.find(s=>s.product.id===t.id);e?e.quantity++:this.items.push({product:t,quantity:1}),this.itemsSubject.next(this.items.slice()),console.log("CartService: item added",t)}getCartItems(){return this.items.slice()}removeItem(t){this.items.splice(t,1),this.itemsSubject.next(this.items.slice()),console.log("CartService: item removed index=",t)}updateQuantity(t,e){e<=0?this.removeItem(t):(this.items[t].quantity=e,this.itemsSubject.next(this.items.slice()))}increaseQuantity(t){this.items[t].quantity++,this.itemsSubject.next(this.items.slice())}decreaseQuantity(t){this.items[t].quantity>1?(this.items[t].quantity--,this.itemsSubject.next(this.items.slice())):this.removeItem(t)}clearCart(){this.items=[],this.itemsSubject.next(this.items.slice()),console.log("CartService: cart cleared")}getTotal(){return this.items.reduce((t,e)=>{let s=e.product.onSale&&e.product.salePrice?e.product.salePrice:e.product.price;return t+s*e.quantity},0)}getSubtotal(){return this.items.reduce((t,e)=>t+e.product.price*e.quantity,0)}getDiscount(){return this.items.reduce((t,e)=>e.product.onSale&&e.product.salePrice?t+(e.product.price-e.product.salePrice)*e.quantity:t,0)}getTotalItems(){return this.items.reduce((t,e)=>t+e.quantity,0)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};export{a};
